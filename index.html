<!DOCTYPE html>
<html>
<head>
    <title>Outdoor Miner</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="A colorful territory capture game with hexagonal tiles">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
    <header>
        <h1>Outdoor Miner</h1>
        <div id="connection-status" class="status-bar">
            <div id="connection-indicator"></div>
            <span id="status-text">Disconnected</span>
        </div>
    </header>

    <!-- Setup Container - Shown Initially -->
    <div id="setup-container" class="container">
        <div class="setup-form">
            <div class="input-group">
                <label for="player-name-input">Your Name</label>
                <input type="text" id="player-name-input" placeholder="Enter your name" required>
            </div>
            
            <div class="action-group">
                <!-- Create button will be hidden via JS when joining via URL -->
                <button id="create-challenge-button" class="primary-button">Create New Game</button>
                <div class="separator">
                    <span>or</span>
                </div>
                <div class="join-group">
                    <input type="text" id="room-code-input" placeholder="Enter Room Code" readonly>
                    <button id="join-challenge-button" disabled>Join Game</button>
                </div>
            </div>
            
            <div id="game-id-display" class="game-code"></div>
            <div id="message-area" class="message-area"></div>
        </div>
    </div>

    <!-- Main Game Elements - Hidden Initially -->
    <div id="score-container" style="display: none;">
         <!-- Score display structure needs review/fixing -->
         <div id="player1-score-container">
             <span id="player1-color-swatch" class="color-swatch-display"></span>
             <span id="player1-name">Player 1</span>: <span id="player1-score">0</span>
         </div>
         <div id="player2-score-container">
              <span id="player2-color-swatch" class="color-swatch-display"></span>
             <span id="player2-name">Player 2</span>: <span id="player2-score">0</span>
         </div>
         <!-- Game ID display Area -->
          <div id="challenge-info" style="display: none;">
              Game ID: <span id="game-id-display">N/A</span>
          </div>
    </div>
    <div id="game-container" class="container" style="display: none;">
        <div id="score-container">
            <div id="player1-info" class="player-info">Player 1: -</div>
            <div id="turn-indicator">Waiting for players...</div>
            <div id="player2-info" class="player-info">Player 2: -</div>
            <div id="share-link" class="share-link"></div>
        </div>

        <div id="game-area">
            <canvas id="gameCanvas" width="800" height="600">
                Your browser does not support the canvas element.
            </canvas>
        </div>

        <div id="color-selection">
            <div class="color-options">
                <!-- Color buttons will be generated by JS -->
            </div>
            <div class="turn-status">
                Last used color: <span id="last-used-color"></span>
            </div>
        </div>

        <div id="message-area" class="message-area"></div>
    </div>

    <!-- Audio elements for game sounds -->
    <audio id="explosion-sound" src="sounds/explosion.mp3" preload="auto"></audio>
    <audio id="power-up-sound" src="sounds/power-up.mp3" preload="auto"></audio>
    <audio id="message-sound" src="sounds/message.mp3" preload="auto"></audio>
    <audio id="taunt-sound" src="sounds/taunt.mp3" preload="auto"></audio>
    
    <!-- Chat overlay (initially hidden) -->
    <div id="chat-container" class="hidden">
        <div id="chat-header">
            <h3>Game Chat</h3>
            <button id="close-chat">Ã—</button>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input-area">
            <input type="text" id="chat-input" placeholder="Type a message...">
            <button id="send-message">Send</button>
            <div id="taunt-menu" class="hidden">
                <div class="taunt-list"></div>
            </div>
        </div>
    </div>

    <!-- Load Socket.IO client library -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

    <!-- Load Game Logic - main.js is the entry point -->
    <script type="module" src="main.js"></script>

    <!-- Sounds -->
    <!-- Preloading sounds - ensure these files exist -->
    <!-- <audio id="sound-place_tile" src="sounds/place_tile.mp3" preload="auto"></audio> --> <!-- Removed, may cause 404 if file missing -->
    <!-- <audio id="sound-capture" src="sounds/capture.mp3" preload="auto"></audio> --> <!-- Removed, may cause 404 if file missing -->
    <!-- <audio id="sound-powerup" src="sounds/power-up.mp3" preload="auto"></audio> --> <!-- Powerups removed, but keep for now if used elsewhere? -->
    <!-- <audio id="sound-error" src="sounds/error.mp3" preload="auto"></audio> --> <!-- Removed, may cause 404 if file missing -->
    <audio id="sound-message" src="sounds/message.mp3" preload="auto"></audio>
    <audio id="sound-taunt" src="sounds/taunt.mp3" preload="auto"></audio>
    <audio id="sound-explosion" src="sounds/explosion.mp3" preload="auto"></audio>

    <footer>
        <p>Outdoor Miner &copy; 2025 - A colorful territory capture game</p>
    </footer>
</body>
</html>